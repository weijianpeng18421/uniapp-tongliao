{"version":3,"sources":["webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?8031","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?21b6","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?1037","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?4461","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?139f","webpack:///E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue?7b4c"],"names":["name","props","data","modalStatus","ctx","points","signUrl","watch","modalName","newValue","created","_this","uni","createCanvasContext","lineWidth","lineCap","lineJoin","methods","hideModal","$emit","showModal","touchstart","e","startX","changedTouches","x","startY","y","startPoint","X","Y","push","beginPath","touchmove","moveX","moveY","movePoint","len","length","draw","touchend","point1","point2","shift","moveTo","lineTo","stroke","clear","that","getSystemInfo","success","res","canvasw","windowWidth","canvash","windowHeight","clearRect","finish","canvasToTempFilePath","canvasId","path","tempFilePath","saveImageToPhotosAlbum","filePath","console","log"],"mappings":"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","file":"components/modal/signModal.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./signModal.vue?vue&type=template&id=972b0426&\"\nvar renderjs\nimport script from \"./signModal.vue?vue&type=script&lang=js&\"\nexport * from \"./signModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./signModal.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/MUIProject/uni-HDxinjiang/nuiapps/components/modal/signModal.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signModal.vue?vue&type=template&id=972b0426&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signModal.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname: 'signModal',\n\tprops: ['modalName','url'],\n\tdata() {\n\t\treturn {\n\t\t\tname: '签名',\n\t\t\tmodalStatus: null,\n\t\t\tctx:'',         //绘图图像\n\t\t\tpoints:[]       ,//路径点集合 \n\t\t\tsignUrl:''\n\t\t}\n\t},\n\twatch:{\n\t\tmodalName(newValue){\n\t\t\tthis.modalStatus = newValue\n\t\t}\n\t},\n\tcreated() {\n\t\tvar _this = this;\n\t\t_this.ctx = uni.createCanvasContext(\"mycanvas\",this);   //创建绘图对象\n\t\t\n\t\t//设置画笔样式\n\t\t_this.ctx.lineWidth = 4;\n\t\t_this.ctx.lineCap = \"round\"\n\t\t_this.ctx.lineJoin = \"round\"\n\t},\n\tmethods:{\n\t\thideModal: function(){\n\t\t\tvar _this = this;\n\t\t\t_this.modalStatus=null\n\t\t\t_this.$emit('update:modalName',null)\n\t\t},\n\t\tshowModal: function(){\n\t\t\tvar _this = this;\n\t\t\t_this.modalStatus = 'Modal'\n\t\t},\n\t\t//触摸开始，获取到起点\n\t\ttouchstart:function(e){\n\t\t\tvar _this = this;\n\t\t\tlet startX = e.changedTouches[0].x;\n\t\t\tlet startY = e.changedTouches[0].y;\n\t\t\tlet startPoint = {X:startX,Y:startY};\n\t\t\t\n\t\t\t/* **************************************************\n\t\t\t\t#由于uni对canvas的实现有所不同，这里需要把起点存起来\n\t\t\t * **************************************************/\n\t\t\t_this.points.push(startPoint);\n\t\t\t\n\t\t\t//每次触摸开始，开启新的路径\n\t\t\t_this.ctx.beginPath();\n\t\t},\n\t\t\n\t\t//触摸移动，获取到路径点\n\t\ttouchmove:function(e){\n\t\t\tvar _this = this;\n\t\t\tlet moveX = e.changedTouches[0].x;\n\t\t\tlet moveY = e.changedTouches[0].y;\n\t\t\tlet movePoint = {X:moveX,Y:moveY};\n\t\t\tthis.points.push(movePoint);       //存点\n\t\t\tlet len = _this.points.length;\n\t\t\tif(len>=2){\n\t\t\t\tthis.draw();                   //绘制路径\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t// 触摸结束，将未绘制的点清空防止对后续路径产生干扰\n\t\ttouchend:function(){   \n\t\t\tvar _this = this;            \n\t\t\t_this.points=[];\n\t\t},\n\t\t\n\t\t/* ***********************************************\n\t\t#   绘制笔迹\n\t\t#\t1.为保证笔迹实时显示，必须在移动的同时绘制笔迹\n\t\t#\t2.为保证笔迹连续，每次从路径集合中区两个点作为起点（moveTo）和终点(lineTo)\n\t\t#\t3.将上一次的终点作为下一次绘制的起点（即清除第一个点）\n\t\t************************************************ */\n\t\tdraw: function() {\n\t\t\tvar _this = this;     \n\t\t\tlet point1 = _this.points[0]\n\t\t\tlet point2 = _this.points[1]\n\t\t\t_this.points.shift()\n\t\t\t_this.ctx.moveTo(point1.X, point1.Y)\n\t\t\t_this.ctx.lineTo(point2.X, point2.Y)\n\t\t\t_this.ctx.stroke()\n\t\t\t_this.ctx.draw(true)\n\t\t},\n\t\t\n\t\t//清空画布\n\t\tclear:function(){\n\t\t\tlet that = this;\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tlet canvasw = res.windowWidth;\n\t\t\t\t\tlet canvash = res.windowHeight;\n\t\t\t\t\tthat.ctx.clearRect(0, 0, canvasw, canvash);\n\t\t\t\t\tthat.ctx.draw(true);\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t\n\t\t//完成绘画并保存到本地\n\t\tfinish:function(){\n\t\t\tvar _this = this\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t  canvasId: 'mycanvas',\n\t\t\t  success: function(res) {\n\t\t\t\tlet path = res.tempFilePath;\n\t\t\t\t_this.signUrl = res.tempFilePath\n\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\tfilePath:path,\n\t\t\t\t\tsuccess: function(){\n\t\t\t\t\t\t_this.signUrl = path\n\t\t\t\t\t\t_this.$emit('update:url',_this.signUrl)\n\t\t\t\t\t\t_this.hideModal()\n\t\t\t\t\t\tconsole.log(_this.signUrl)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\n\t\t\t  } \n\t\t\t})\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signModal.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signModal.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1602295210234\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}